@model MiningOps.Entity.RegisterMining

@{
    ViewData["Title"] = "User Details";
}

<div class="page-header">
    <h1><i class="fas fa-user-circle"></i> User Details</h1>
    <p class="lead">View complete user information and profile details</p>
</div>

<div class="card shadow-sm">
    <div class="card-header">
        <h5 class="mb-0"><i class="fas fa-id-card"></i> User Information</h5>
    </div>
    <div class="card-body">
        <div class="row">
            <!-- User Profile Section -->
            <div class="col-md-4">
                <div class="text-center mb-4">
                    <div class="avatar-profile bg-primary text-white mx-auto mb-3">
                        @Model.FullName?.Split(' ').Select(x => x[0].ToString()).Take(2).Aggregate("", (a, b) => a + b)
                    </div>
                    <h4>@Model.FullName</h4>
                    <span class="badge @GetRoleBadgeClass(Model.Role) badge-lg">
                        <i class="@GetRoleIcon(Model.Role)"></i> @Model.Role
                    </span>
                </div>

                <div class="user-quick-info">
                    <div class="info-item">
                        <i class="fas fa-at text-muted"></i>
                        <strong>Username:</strong>
                        <span>@Model.Username</span>
                    </div>
                    <div class="info-item">
                        <i class="fas fa-envelope text-muted"></i>
                        <strong>Email:</strong>
                        <span>@Model.Email</span>
                    </div>
                    <div class="info-item">
                        <i class="fas fa-phone text-muted"></i>
                        <strong>Phone:</strong>
                        <span>@Model.PhoneNumber</span>
                    </div>
                </div>
            </div>

            <!-- Detailed Information Section -->
            <div class="col-md-8">
                <div class="details-section">
                    <h6 class="section-title"><i class="fas fa-info-circle"></i> Basic Information</h6>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="detail-item">
                                <label>Full Name</label>
                                <div class="detail-value">@Model.FullName</div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="detail-item">
                                <label>Username</label>
                                <div class="detail-value">@Model.Username</div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="detail-item">
                                <label>Email Address</label>
                                <div class="detail-value">@Model.Email</div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="detail-item">
                                <label>Phone Number</label>
                                <div class="detail-value">@Model.PhoneNumber</div>
                            </div>
                        </div>
                    </div>

                  
                       

                    <h6 class="section-title mt-4"><i class="fas fa-history"></i> Account Timeline</h6>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="detail-item">
                                <label><i class="fas fa-plus-circle text-success"></i> Created At</label>
                                <div class="detail-value">@Model.CreatedAt.ToString("MMMM dd, yyyy 'at' hh:mm tt")</div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="detail-item">
                                <label><i class="fas fa-edit text-primary"></i> Last Updated</label>
                                <div class="detail-value">
                                    @if (Model.UpdatedAt.HasValue)
                                    {
                                        @Model.UpdatedAt.Value.ToString("MMMM dd, yyyy 'at' hh:mm tt")
                                    }
                                    else
                                    {
                                        <span class="text-muted">Never updated</span>
                                    }
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Role-specific Profile Details -->
                    @if (Model.Role ==  MiningOps.Entity.UserRole.Admin && Model.AdminProfile != null)
                    {
                        <h6 class="section-title mt-4"><i class="fas fa-crown"></i> Admin Profile</h6>
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="detail-item">
                                    <label>Department</label>
                                    <div class="detail-value">@Model.AdminProfile.Department</div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="detail-item">
                                    <label>Permissions</label>
                                    <div class="detail-value">
                                        @if (Model.AdminProfile.CanManageUsers)
                                        {
                                            <span class="badge bg-success me-1">Manage Users</span>
                                        }
                                        @if (Model.AdminProfile.CanApproveRequests)
                                        {
                                            <span class="badge bg-info">Approve Requests</span>
                                        }
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                    else if (Model.Role == MiningOps.Entity.UserRole.Supervisor && Model.SupervisorProfile != null)
                    {
                        <h6 class="section-title mt-4"><i class="fas fa-user-shield"></i> Supervisor Profile</h6>
                        <div class="row">
                            <div class="col-sm-4">
                                <div class="detail-item">
                                    <label>Team</label>
                                    <div class="detail-value">@Model.SupervisorProfile.Team</div>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="detail-item">
                                    <label>Mine Location</label>
                                    <div class="detail-value">@Model.SupervisorProfile.MineLocation</div>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="detail-item">
                                    <label>Shift</label>
                                    <div class="detail-value">@Model.SupervisorProfile.Shift</div>
                                </div>
                            </div>
                        </div>
                    }
                    else if (Model.Role == MiningOps.Entity.UserRole.Supplier && Model.SupplierProfile != null)
                    {
                        <h6 class="section-title mt-4"><i class="fas fa-truck"></i> Supplier Profile</h6>
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="detail-item">
                                    <label>Company Name</label>
                                    <div class="detail-value">@Model.SupplierProfile.CompanyName</div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="detail-item">
                                    <label>Contact Person</label>
                                    <div class="detail-value">@Model.SupplierProfile.ContactPerson</div>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="detail-item">
                                    <label>Address</label>
                                    <div class="detail-value">@Model.SupplierProfile.Address</div>
                                </div>
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>

    <div class="card-footer">
        <div class="action-buttons text-center">
            <a asp-action="Edit" asp-route-id="@Model.AccId" class="btn btn-primary btn-lg">
                <i class="fas fa-edit"></i> Edit User
            </a>
            <a asp-action="Index" class="btn btn-secondary btn-lg ms-2">
                <i class="fas fa-arrow-left"></i> Back to List
            </a>
            <a href="javascript:window.print()" class="btn btn-info btn-lg ms-2">
                <i class="fas fa-print"></i> Print
            </a>
        </div>
    </div>
</div>

@functions {
    string GetRoleBadgeClass(MiningOps.Entity.UserRole role)
    {
        return role switch
        {
            MiningOps.Entity.UserRole.Admin => "bg-danger",
            MiningOps.Entity.UserRole.Supervisor => "bg-warning text-dark",
            MiningOps.Entity.UserRole.Supplier => "bg-success",
            _ => "bg-secondary"
        };
    }

    string GetRoleIcon( MiningOps.Entity.UserRole role)
    {
        return role switch
        {
            MiningOps.Entity.UserRole.Admin => "fas fa-crown",
            MiningOps.Entity.UserRole.Supervisor => "fas fa-user-shield",
            MiningOps.Entity.UserRole.Supplier => "fas fa-truck",
            _ => "fas fa-user"
        };
    }
}

<style>
    .page-header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 2rem;
        border-radius: 10px;
        margin-bottom: 2rem;
    }

        .page-header h1 {
            margin: 0;
            font-weight: 300;
        }

        .page-header .lead {
            opacity: 0.9;
            margin: 0.5rem 0 0 0;
        }

    .card {
        border: none;
        border-radius: 15px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .card-header {
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        border-bottom: 2px solid #dee2e6;
        padding: 1.5rem;
        border-radius: 15px 15px 0 0 !important;
    }

        .card-header h5 {
            color: #495057;
            font-weight: 600;
        }

    .card-body {
        padding: 2rem;
    }

    .card-footer {
        background: #f8f9fa;
        border-top: 1px solid #dee2e6;
        padding: 1.5rem;
        border-radius: 0 0 15px 15px !important;
    }

    .avatar-profile {
        width: 100px;
        height: 100px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        font-size: 2rem;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    .badge-lg {
        font-size: 0.9rem;
        padding: 0.5em 1em;
    }

    .user-quick-info {
        background: #f8f9fa;
        border-radius: 10px;
        padding: 1.5rem;
    }

    .info-item {
        display: flex;
        align-items: center;
        margin-bottom: 1rem;
        padding-bottom: 1rem;
        border-bottom: 1px solid #e9ecef;
    }

        .info-item:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }

        .info-item i {
            width: 20px;
            margin-right: 0.75rem;
        }

        .info-item strong {
            margin-right: 0.5rem;
            min-width: 80px;
        }

    .details-section {
        background: white;
        border-radius: 10px;
        padding: 1.5rem;
    }

    .section-title {
        color: #495057;
        font-weight: 600;
        margin-bottom: 1rem;
        padding-bottom: 0.5rem;
        border-bottom: 2px solid #007bff;
    }

        .section-title i {
            margin-right: 0.5rem;
            color: #007bff;
        }

    .detail-item {
        margin-bottom: 1.5rem;
    }

        .detail-item label {
            font-weight: 600;
            color: #6c757d;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.25rem;
            display: block;
        }

    .detail-value {
        font-size: 1.1rem;
        color: #495057;
        padding: 0.5rem 0;
        word-break: break-word;
    }

    .security-field code {
        background: #f8f9fa;
        padding: 0.25rem 0.5rem;
        border-radius: 4px;
        font-size: 0.85rem;
        color: #dc3545;
        word-break: break-all;
    }

    .action-buttons {
        text-align: center;
    }

    .btn {
        border-radius: 10px;
        padding: 0.75rem 2rem;
        font-weight: 600;
        transition: all 0.3s ease;
        border: none;
        margin: 0.25rem;
    }

    .btn-lg {
        padding: 1rem 2.5rem;
        font-size: 1.1rem;
    }

    .btn-primary {
        background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);
        box-shadow: 0 4px 15px rgba(0, 123, 255, 0.3);
    }

    .btn-secondary {
        background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
        box-shadow: 0 4px 15px rgba(108, 117, 125, 0.3);
    }

    .btn-info {
        background: linear-gradient(135deg, #17a2b8 0%, #138496 100%);
        box-shadow: 0 4px 15px rgba(23, 162, 184, 0.3);
    }

    .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
    }

    /* Print Styles */
    @@media print {
        .page-header {
            background: #f8f9fa !important;
            color: #000 !important;
            border: 2px solid #000;
        }

        .btn {
            display: none !important;
        }

        .card {
            box-shadow: none !important;
            border: 1px solid #000 !important;
        }
    }

    /* Responsive Design */
    @@media (max-width: 768px) {
        .card-body {
            padding: 1rem;
        }

        .user-quick-info {
            margin-bottom: 1rem;
        }

        .info-item {
            flex-direction: column;
            align-items: flex-start;
        }

            .info-item strong {
                min-width: auto;
                margin-bottom: 0.25rem;
            }

        .action-buttons .btn {
            width: 100%;
            margin: 0.5rem 0;
        }

        .avatar-profile {
            width: 80px;
            height: 80px;
            font-size: 1.5rem;
        }
    }
</style>

<!-- Font Awesome Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">