@model MiningOps.Models.MaterialRequestViewModel

@{
    ViewData["Title"] = "Create Material Request";
}
<link rel="stylesheet" href="~/css/site1.css" asp-append-version="true" />
<div class="page-header">
    <h1><i class="fas fa-box"></i> Create Material Request</h1>
    <p class="lead">Fill in the details to add a new material request</p>
</div>

<div class="card shadow-sm">
    <div class="card-header bg-light">
        <h5 class="mb-0"><i class="fas fa-info-circle"></i> Request Details</h5>
    </div>
    <div class="card-body">
        <form asp-action="Create" class="form-container">
            <div asp-validation-summary="ModelOnly" class="alert alert-danger"></div>

            <div class="form-group mb-4">
                <label asp-for="ItemName" class="form-label"><i class="fas fa-box"></i> Item Name</label>
                <input asp-for="ItemName" class="form-control form-control-lg" placeholder="Enter item name" />
                <span asp-validation-for="ItemName" class="text-danger validation-message"></span>
            </div>

            <div class="form-group mb-4">
                <label asp-for="Quantity" class="form-label"><i class="fas fa-sort-numeric-up"></i> Quantity</label>
                <input asp-for="Quantity" class="form-control form-control-lg" placeholder="Enter quantity" />
                <span asp-validation-for="Quantity" class="text-danger validation-message"></span>
            </div>

            <div class="form-group mb-4">
                <label asp-for="Status" class="form-label"><i class="fas fa-tasks"></i> Status</label>
                <input asp-for="Status" class="form-control form-control-lg" placeholder="Pending / Approved / Rejected" />
                <span asp-validation-for="Status" class="text-danger validation-message"></span>
            </div>

            <div class="form-group mb-4">
                <label asp-for="RequestDate" class="form-label"><i class="fas fa-calendar-alt"></i> Request Date</label>
                <input asp-for="RequestDate" class="form-control form-control-lg" type="date" />
                <span asp-validation-for="RequestDate" class="text-danger validation-message"></span>
            </div>

            <div class="form-actions mt-4">
                <input type="submit" value="Create Request" class="btn btn-primary btn-lg" />
                <a asp-action="Index" class="btn btn-secondary btn-lg ms-2"><i class="fas fa-arrow-left"></i> Back to List</a>
            </div>
        </form>
    </div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const inputs = document.querySelectorAll('.form-control, .form-select');
            inputs.forEach(input => {
                input.addEventListener('blur', function() {
                    this.classList.toggle('is-valid', this.value.trim() !== '');
                    this.classList.toggle('is-invalid', this.value.trim() === '');
                });
                input.addEventListener('input', function() {
                    if (this.value.trim() !== '') {
                        this.classList.add('is-valid');
                        this.classList.remove('is-invalid');
                    }
                });
            });

            const form = document.querySelector('form');
            form.addEventListener('submit', function(e) {
                const submitBtn = this.querySelector('input[type="submit"]');
                submitBtn.disabled = true;
                submitBtn.value = 'Creating...';
            });
        });
    </script>
}
